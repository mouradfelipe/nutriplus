{"ast":null,"code":"var _jsxFileName = \"/home/omsf/Documentos/2.ITA/1. CES-28/3. Pratica/nutriplus/nutriplus_front/src/containers/login_page/login_page.jsx\";\nimport React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button, Form, Grid, Header, Message, Segment } from \"semantic-ui-react\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.login = async () => {\n      const res = await fetch(\"http://localhost:8080/user/login/\", {\n        method: \"post\",\n        body: JSON.stringify({\n          username: this.state.username,\n          password: this.state.password\n        }),\n        headers: new Headers({\n          \"Content-Type\": \"application/json\"\n        })\n      });\n      const answ = await res;\n      const info = await answ.json();\n\n      if (answ.status === 400) {\n        this.setState({\n          wrong_input: \"Usuário ou senha incorretos.\"\n        });\n      } else if (answ.status === 200) {\n        this.setState({\n          wrong_input: \"\"\n        });\n        console.log(info);\n        this.props.updateLogin();\n        console.log(this.state.token);\n        localStorage.setItem(\"stored_token\", info.token);\n        localStorage.setItem(\"stored_refresh\", info.refresh);\n        localStorage.setItem(\"stored_auth\", 1);\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(Grid, {\n      textAlign: \"center\",\n      style: {\n        height: \"10vh\"\n      },\n      verticalAlign: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      style: {\n        maxWidth: 450\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(Header, {\n      as: \"h2\",\n      color: \"teal\",\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Fa\\xE7a seu login abaixo\"), React.createElement(Form, {\n      size: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      stacked: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      icon: \"user\",\n      iconPosition: \"left\",\n      placeholder: \"Nome de usu\\xE1rio\",\n      onChange: event => {\n        this.setState({\n          username: event.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      fluid: true,\n      icon: \"lock\",\n      iconPosition: \"left\",\n      placeholder: \"Senha\",\n      type: \"password\",\n      onChange: event => {\n        this.setState({\n          password: event.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), React.createElement(Button, {\n      color: \"teal\",\n      fluid: true,\n      size: \"large\",\n      onClick: this.login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.state.wrong_input))), React.createElement(Message, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Acabou de chegar? \", React.createElement(NavLink, {\n      to: \"/subscription\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Inscreva-se!\"))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/omsf/Documentos/2.ITA/1. CES-28/3. Pratica/nutriplus/nutriplus_front/src/containers/login_page/login_page.jsx"],"names":["React","Component","NavLink","Button","Form","Grid","Header","Message","Segment","Login","state","login","res","fetch","method","body","JSON","stringify","username","password","headers","Headers","answ","info","json","status","setState","wrong_input","console","log","props","updateLogin","token","localStorage","setItem","refresh","render","height","maxWidth","event","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport {\n  Button,\n  Form,\n  Grid,\n  Header,\n  Message,\n  Segment\n} from \"semantic-ui-react\";\n\nclass Login extends Component {\n  state = {};\n\n  login = async () => {\n    const res = await fetch(\"http://localhost:8080/user/login/\", {\n      method: \"post\",\n      body: JSON.stringify({\n        username: this.state.username,\n        password: this.state.password\n      }),\n      headers: new Headers({ \"Content-Type\": \"application/json\" })\n    });\n    const answ = await res;\n    const info = await answ.json();\n    if (answ.status === 400) {\n      this.setState({ wrong_input: \"Usuário ou senha incorretos.\" });\n    } else if (answ.status === 200) {\n      this.setState({ wrong_input: \"\" });\n      console.log(info);\n      this.props.updateLogin();\n      console.log(this.state.token);\n      localStorage.setItem(\"stored_token\", info.token);\n      localStorage.setItem(\"stored_refresh\", info.refresh);\n      localStorage.setItem(\"stored_auth\", 1);\n    }\n  };\n\n  render() {\n    return (\n      <Grid\n        textAlign=\"center\"\n        style={{ height: \"10vh\" }}\n        verticalAlign=\"middle\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h2\" color=\"teal\" textAlign=\"center\">\n            Faça seu login abaixo\n          </Header>\n          <Form size=\"large\">\n            <Segment stacked>\n              <Form.Input\n                fluid\n                icon=\"user\"\n                iconPosition=\"left\"\n                placeholder=\"Nome de usuário\"\n                onChange={event => {\n                  this.setState({ username: event.target.value });\n                }}\n              />\n              <Form.Input\n                fluid\n                icon=\"lock\"\n                iconPosition=\"left\"\n                placeholder=\"Senha\"\n                type=\"password\"\n                onChange={event => {\n                  this.setState({ password: event.target.value });\n                }}\n              />\n\n              <Button color=\"teal\" fluid size=\"large\" onClick={this.login}>\n                Login\n              </Button>\n              <p>{this.state.wrong_input}</p>\n            </Segment>\n          </Form>\n          <Message>\n            Acabou de chegar? <NavLink to=\"/subscription\">Inscreva-se!</NavLink>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}