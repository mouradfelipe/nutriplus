{"ast":null,"code":"var _jsxFileName = \"/home/omsf/Documentos/2.ITA/1. CES-28/3. Pratica/nutriplus/nutriplus_front/src/components/FoodSuggestions/FoodSuggestions.jsx\";\nimport React, { Component } from \"react\";\nimport Refeicao from \"./Refeicao\";\nimport TabelaRefeicoes from \"./TabelaRefeicoes\";\nimport Infos from \"./Infos\";\nimport { Grid, Button } from \"semantic-ui-react\";\nconst atributos = [\"Valor Energético (kCal)\", \"Carboidratos\", \"Proteínas\", \"Lipídios\"];\n\nclass Cardapio extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.componentDidMount = async () => {\n      let token = localStorage.getItem(\"stored_token\");\n      const res = await fetch(\"http://localhost:8080/foods/list-foods/\", {\n        method: \"get\",\n        headers: new Headers({\n          Authorization: \"Port \" + token,\n          \"Content-Type\": \"application/json\"\n        })\n      });\n      const info = await res.json();\n      console.log(info); //if (info[0]) this.setState({ res: info[0].food_name });\n\n      await new Promise(resolve => {\n        this.setState({\n          COMIDAS: info\n        }, () => {\n          resolve();\n        });\n      });\n      await new Promise(resolve => {\n        this.setState({\n          refeicao: 0,\n          valorNutricional: [[atributos[0], 0], [atributos[1], 0], [atributos[2], 0], [atributos[3], 0]],\n          cardapios: [[], [], [], [], [], []],\n          factors: [this.initializeFactors(), this.initializeFactors(), this.initializeFactors(), this.initializeFactors(), this.initializeFactors(), this.initializeFactors()]\n        }, () => {\n          resolve();\n        });\n      });\n      this.setState({\n        mounted: 1\n      });\n    };\n\n    this.initializeFactors = () => {\n      let factors = {};\n      const COMIDAS = this.state.COMIDAS;\n      COMIDAS.map(comida => {\n        factors[comida.food_name] = 1;\n      });\n      return factors;\n    };\n\n    this.handleTransicaoRefeicao = (e, {\n      name,\n      value\n    }) => {\n      if (name === \"Next\") this.setState(prevState => ({\n        refeicao: prevState.refeicao + 1\n      }));else if (name === \"Prev\") this.setState(prevState => {\n        if (prevState.refeicao > 0) return {\n          refeicao: prevState.refeicao - 1\n        };else return {\n          refeicao: 0\n        };\n      });else if (name === \"Infos\") {\n        this.setState({\n          refeicao: value\n        });\n      }\n    };\n\n    this.handleCardapios = (refeicao, cardapio) => {\n      this.setState(prevState => {\n        const cardapios = prevState.cardapios.map((item, j) => {\n          if (j === refeicao) {\n            return cardapio;\n          } else {\n            return item;\n          }\n        });\n        return {\n          cardapios: cardapios\n        };\n      });\n    };\n\n    this.handleFactors = (refeicao, factors_local) => {\n      this.setState(prevState => {\n        const factors = prevState.factors.map((item, j) => {\n          if (j === refeicao) {\n            return factors_local;\n          } else {\n            return item;\n          }\n        });\n        return {\n          factors: factors\n        };\n      });\n    };\n\n    this.handleInfos = valorNutricional => {\n      this.setState({\n        valorNutricional: valorNutricional\n      });\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          refeicao = _this$state.refeicao,\n          valorNutricional = _this$state.valorNutricional,\n          cardapios = _this$state.cardapios,\n          factors = _this$state.factors,\n          COMIDAS = _this$state.COMIDAS;\n\n    if (refeicao >= 6) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \" fim \");\n    }\n\n    if (this.state.mounted) return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      width: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(TabelaRefeicoes, {\n      handleRefeicao: this.handleTransicaoRefeicao,\n      refeicao: refeicao,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(Grid.Column, {\n      width: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Infos, {\n      valorNutricional: valorNutricional,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      width: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Refeicao, {\n      refeicao: refeicao,\n      COMIDAS: COMIDAS.slice(1, 5),\n      cardapios: cardapios,\n      handleCardapios: this.handleCardapios,\n      atributos: atributos,\n      handleInfos: this.handleInfos,\n      factors: factors,\n      handleFactors: this.handleFactors,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      floated: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(Button, {\n      name: \"Prev\",\n      onClick: this.handleTransicaoRefeicao,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Prev\")), React.createElement(Grid.Column, {\n      floated: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Button, {\n      name: \"Next\",\n      onClick: this.handleTransicaoRefeicao,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Next\"))))));else return \"\";\n  }\n\n}\n\nexport default Cardapio;","map":{"version":3,"sources":["/home/omsf/Documentos/2.ITA/1. CES-28/3. Pratica/nutriplus/nutriplus_front/src/components/FoodSuggestions/FoodSuggestions.jsx"],"names":["React","Component","Refeicao","TabelaRefeicoes","Infos","Grid","Button","atributos","Cardapio","state","componentDidMount","token","localStorage","getItem","res","fetch","method","headers","Headers","Authorization","info","json","console","log","Promise","resolve","setState","COMIDAS","refeicao","valorNutricional","cardapios","factors","initializeFactors","mounted","map","comida","food_name","handleTransicaoRefeicao","e","name","value","prevState","handleCardapios","cardapio","item","j","handleFactors","factors_local","handleInfos","render","slice"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Refeicao from \"./Refeicao\";\nimport TabelaRefeicoes from \"./TabelaRefeicoes\";\nimport Infos from \"./Infos\";\nimport { Grid, Button } from \"semantic-ui-react\";\n\nconst atributos = [\n  \"Valor Energético (kCal)\",\n  \"Carboidratos\",\n  \"Proteínas\",\n  \"Lipídios\"\n];\n\nclass Cardapio extends Component {\n  state = {};\n\n  componentDidMount = async () => {\n    let token = localStorage.getItem(\"stored_token\");\n    const res = await fetch(\"http://localhost:8080/foods/list-foods/\", {\n      method: \"get\",\n      headers: new Headers({\n        Authorization: \"Port \" + token,\n        \"Content-Type\": \"application/json\"\n      })\n    });\n    const info = await res.json();\n    console.log(info);\n    //if (info[0]) this.setState({ res: info[0].food_name });\n    await new Promise(resolve => {\n      this.setState({ COMIDAS: info }, () => {\n        resolve();\n      });\n    });\n    await new Promise(resolve => {\n      this.setState(\n        {\n          refeicao: 0,\n          valorNutricional: [\n            [atributos[0], 0],\n            [atributos[1], 0],\n            [atributos[2], 0],\n            [atributos[3], 0]\n          ],\n          cardapios: [[], [], [], [], [], []],\n          factors: [\n            this.initializeFactors(),\n            this.initializeFactors(),\n            this.initializeFactors(),\n            this.initializeFactors(),\n            this.initializeFactors(),\n            this.initializeFactors()\n          ]\n        },\n        () => {\n          resolve();\n        }\n      );\n    });\n    this.setState({\n      mounted: 1\n    });\n  };\n\n  initializeFactors = () => {\n    let factors = {};\n    const COMIDAS = this.state.COMIDAS;\n    COMIDAS.map(comida => {\n      factors[comida.food_name] = 1;\n    });\n    return factors;\n  };\n\n  handleTransicaoRefeicao = (e, { name, value }) => {\n    if (name === \"Next\")\n      this.setState(prevState => ({ refeicao: prevState.refeicao + 1 }));\n    else if (name === \"Prev\")\n      this.setState(prevState => {\n        if (prevState.refeicao > 0) return { refeicao: prevState.refeicao - 1 };\n        else return { refeicao: 0 };\n      });\n    else if (name === \"Infos\") {\n      this.setState({\n        refeicao: value\n      });\n    }\n  };\n\n  handleCardapios = (refeicao, cardapio) => {\n    this.setState(prevState => {\n      const cardapios = prevState.cardapios.map((item, j) => {\n        if (j === refeicao) {\n          return cardapio;\n        } else {\n          return item;\n        }\n      });\n      return { cardapios: cardapios };\n    });\n  };\n\n  handleFactors = (refeicao, factors_local) => {\n    this.setState(prevState => {\n      const factors = prevState.factors.map((item, j) => {\n        if (j === refeicao) {\n          return factors_local;\n        } else {\n          return item;\n        }\n      });\n      return { factors: factors };\n    });\n  };\n\n  handleInfos = valorNutricional => {\n    this.setState({ valorNutricional: valorNutricional });\n  };\n\n  render() {\n    const {\n      refeicao,\n      valorNutricional,\n      cardapios,\n      factors,\n      COMIDAS\n    } = this.state;\n\n    if (refeicao >= 6) {\n      return <div> fim </div>;\n    }\n    if (this.state.mounted)\n      return (\n        <div>\n          <Grid>\n            <Grid.Column width={2}>\n              <TabelaRefeicoes\n                handleRefeicao={this.handleTransicaoRefeicao}\n                refeicao={refeicao}\n              ></TabelaRefeicoes>\n            </Grid.Column>\n            <Grid.Column width={3}>\n              <h4>\n                <Infos valorNutricional={valorNutricional}></Infos>\n              </h4>\n            </Grid.Column>\n            <Grid.Column width={8}>\n              <Refeicao\n                refeicao={refeicao}\n                COMIDAS={COMIDAS.slice(1, 5)}\n                cardapios={cardapios}\n                handleCardapios={this.handleCardapios}\n                atributos={atributos}\n                handleInfos={this.handleInfos}\n                factors={factors}\n                handleFactors={this.handleFactors}\n              ></Refeicao>\n              <br></br>\n              <br></br>\n              <Grid>\n                <Grid.Column floated=\"left\">\n                  <Button name={\"Prev\"} onClick={this.handleTransicaoRefeicao}>\n                    Prev\n                  </Button>\n                </Grid.Column>\n                <Grid.Column floated=\"right\">\n                  <Button name={\"Next\"} onClick={this.handleTransicaoRefeicao}>\n                    Next\n                  </Button>\n                </Grid.Column>\n              </Grid>\n            </Grid.Column>\n          </Grid>\n        </div>\n      );\n    else return \"\";\n  }\n}\n\nexport default Cardapio;\n"]},"metadata":{},"sourceType":"module"}